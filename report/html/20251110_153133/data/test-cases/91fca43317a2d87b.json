{"uid":"91fca43317a2d87b","name":"testT4264","fullName":"test_case.UI.Test_Katana.test_ui#test_case","historyId":"3d72f38757083777bb1cca945d7c2fb3","time":{"start":1762760073425,"stop":1762760073670,"duration":245},"status":"broken","statusMessage":"playwright._impl._errors.TargetClosedError: Page.wait_for_timeout: Target page, context or browser has been closed","statusTrace":"smokecases1 = {'testT4264': {'description': 'Verify that the user adds the link card of Image on the shop page(modules) and module m...'tab'}, 'R_click3': {'name': 'Add new module', 'role': 'button'}, 'R_click4': {'name': 'Add', 'role': 'button'}, ...}}}\npage = <Page url='https://release.pear.us/demi-release'>\n\n    @allure.testcase('https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp',\n                     'ONS测试用例链接')\n    @allure.title(\"测试执行\")\n    def test_case(smokecases1, page: Page):\n        page.set_default_timeout(90000)\n        caseno = list(smokecases1.keys())[0]\n        description = dict(list(smokecases1.values())[0])[\"description\"]\n        test_step = list(smokecases1.values())[0][\"test_step\"]\n        expect_result = dict(list(smokecases1.values())[0])[\"expect_result\"]\n        allure_title(caseno)\n        allure_step_no(f'description:{description}')\n        allure_step_no(f'test_step:{str(test_step)}')\n    \n        # --- BEGIN INJECTED LOGIN CODE ---\n        # allure_step_no('Executing inline login to solve authentication issue.')\n        # page.goto(\"https://release.pear.us/login\", timeout=90000)\n        # page.get_by_text(\"Login with password\").click()\n        # page.get_by_role(\"textbox\", name=\"Phone number\").fill(\"4086257869\")\n        # page.get_by_role(\"textbox\", name=\"Input your password\").fill(\"Xuan123456\")\n        # page.get_by_role(\"button\", name=\"Log in\").click()\n        # # Wait for navigation to complete by waiting for a URL that is not the login page.\n        # page.wait_for_url(lambda url: \"/login\" not in url, timeout=60000)\n        # allure_step_no('Inline login finished, proceeding with test steps.')\n        # --- END INJECTED LOGIN CODE ---\n    \n        for k, v in test_step.items():\n            if k == \"open\":\n                if caseno == \"testT4264\":\n                    max_retries = 3\n                    for attempt in range(max_retries):\n                        try:\n>                           page.wait_for_timeout(1000) # Short sleep before navigation\n\ntest_case\\UI\\Test_Katana\\test_ui.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nD:\\Program Files\\lib\\site-packages\\playwright\\sync_api\\_generated.py:11496: in wait_for_timeout\n    self._sync(self._impl_obj.wait_for_timeout(timeout=timeout))\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_page.py:1104: in wait_for_timeout\n    await self._main_frame.wait_for_timeout(timeout)\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_frame.py:844: in wait_for_timeout\n    await self._channel.send(\"waitForTimeout\", None, {\"waitTimeout\": timeout})\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x0000026A220D1BE0>\ncb = <function Channel.send.<locals>.<lambda> at 0x0000026A2267A670>, is_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TargetClosedError: Page.wait_for_timeout: Target page, context or browser has been closed\n\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_connection.py:558: TargetClosedError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1762759894153,"stop":1762759894218,"duration":65},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"pytestconfig","time":{"start":1762759894218,"stop":1762759894218,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"base_url","time":{"start":1762759894218,"stop":1762759894218,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"_verify_url","time":{"start":1762759894218,"stop":1762759894218,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"delete_output_dir","time":{"start":1762759894218,"stop":1762759894219,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"browser_type_launch_args","time":{"start":1762759894219,"stop":1762759894219,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"playwright","time":{"start":1762759894219,"stop":1762759894597,"duration":378},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"connect_options","time":{"start":1762759894597,"stop":1762759894597,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"browser_type","time":{"start":1762759894597,"stop":1762759894597,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"launch_browser","time":{"start":1762759894597,"stop":1762759894597,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"browser","time":{"start":1762759894598,"stop":1762759894799,"duration":201},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"device","time":{"start":1762759894799,"stop":1762759894799,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"browser_context_args","time":{"start":1762759894800,"stop":1762759894800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"browser_context_args","time":{"start":1762759894800,"stop":1762759894802,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"_pw_artifacts_folder","time":{"start":1762759894800,"stop":1762759894800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"context","time":{"start":1762759894802,"stop":1762759894967,"duration":165},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"page","time":{"start":1762759894967,"stop":1762759895049,"duration":82},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"smokecases1","time":{"start":1762760073425,"stop":1762760073425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"status":"broken","statusMessage":"playwright._impl._errors.TargetClosedError: Page.wait_for_timeout: Target page, context or browser has been closed","statusTrace":"smokecases1 = {'testT4264': {'description': 'Verify that the user adds the link card of Image on the shop page(modules) and module m...'tab'}, 'R_click3': {'name': 'Add new module', 'role': 'button'}, 'R_click4': {'name': 'Add', 'role': 'button'}, ...}}}\npage = <Page url='https://release.pear.us/demi-release'>\n\n    @allure.testcase('https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp',\n                     'ONS测试用例链接')\n    @allure.title(\"测试执行\")\n    def test_case(smokecases1, page: Page):\n        page.set_default_timeout(90000)\n        caseno = list(smokecases1.keys())[0]\n        description = dict(list(smokecases1.values())[0])[\"description\"]\n        test_step = list(smokecases1.values())[0][\"test_step\"]\n        expect_result = dict(list(smokecases1.values())[0])[\"expect_result\"]\n        allure_title(caseno)\n        allure_step_no(f'description:{description}')\n        allure_step_no(f'test_step:{str(test_step)}')\n    \n        # --- BEGIN INJECTED LOGIN CODE ---\n        # allure_step_no('Executing inline login to solve authentication issue.')\n        # page.goto(\"https://release.pear.us/login\", timeout=90000)\n        # page.get_by_text(\"Login with password\").click()\n        # page.get_by_role(\"textbox\", name=\"Phone number\").fill(\"4086257869\")\n        # page.get_by_role(\"textbox\", name=\"Input your password\").fill(\"Xuan123456\")\n        # page.get_by_role(\"button\", name=\"Log in\").click()\n        # # Wait for navigation to complete by waiting for a URL that is not the login page.\n        # page.wait_for_url(lambda url: \"/login\" not in url, timeout=60000)\n        # allure_step_no('Inline login finished, proceeding with test steps.')\n        # --- END INJECTED LOGIN CODE ---\n    \n        for k, v in test_step.items():\n            if k == \"open\":\n                if caseno == \"testT4264\":\n                    max_retries = 3\n                    for attempt in range(max_retries):\n                        try:\n>                           page.wait_for_timeout(1000) # Short sleep before navigation\n\ntest_case\\UI\\Test_Katana\\test_ui.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nD:\\Program Files\\lib\\site-packages\\playwright\\sync_api\\_generated.py:11496: in wait_for_timeout\n    self._sync(self._impl_obj.wait_for_timeout(timeout=timeout))\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_page.py:1104: in wait_for_timeout\n    await self._main_frame.wait_for_timeout(timeout)\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_frame.py:844: in wait_for_timeout\n    await self._channel.send(\"waitForTimeout\", None, {\"waitTimeout\": timeout})\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x0000026A220D1BE0>\ncb = <function Channel.send.<locals>.<lambda> at 0x0000026A2267A670>, is_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TargetClosedError: Page.wait_for_timeout: Target page, context or browser has been closed\n\nD:\\Program Files\\lib\\site-packages\\playwright\\_impl\\_connection.py:558: TargetClosedError","steps":[{"name":"description:Verify that the user adds the link card of Image on the shop page(modules) and module menu","time":{"start":1762760073426,"stop":1762760073426,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"test_step:{'open': 'https://release.pear.us/demi-release', 'sleep1': 5000, 'R_click1': {'role': 'button', 'name': 'Customize'}, 'R_click2': {'role': 'tab', 'name': 'Modules'}, 'R_click3': {'role': 'button', 'name': 'Add new module'}, 'check1': {'role': 'radio', 'name': 'Links (select a type below)'}, 'l_click_regex1': {'text': '^Image$', 'index': 1}, 'check2': {'role': 'radio', 'name': 'Carousel Carousel'}, 'sleep2': 5000, 'R_click4': {'role': 'button', 'name': 'Add'}, 'R_click5': {'role': 'button', 'name': 'Add new link'}, 'fill_by_placeholder_and_locator1': {'placeholder': 'https://example.com', 'locator': 'input[name=\"url\"]', 'value': 'www.baidu.com'}, 'fill2': {'placeholder': 'As the bold title on your', 'value': 'test aotu image'}, 'upload1': {'text': 'Upload', 'file_path': 'C:\\\\Users\\\\tester\\\\gemini-autotest\\\\data\\\\test image.jpg'}, 'wait_for_upload_and_ui_update1': {'timeout': 2000}, 'click_xpath1': {'xpath': 'xpath=/html/body/div[2]/div[3]/div[3]/div/div'}, 'R_click6': {'role': 'button', 'name': 'Publish'}}","time":{"start":1762760073426,"stop":1762760073426,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"stepsCount":2,"hasContent":true,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":true},"afterStages":[{"name":"page::0","time":{"start":1762760074062,"stop":1762760074062,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"context::0","time":{"start":1762760074063,"stop":1762760074262,"duration":199},"status":"passed","steps":[],"attachments":[{"uid":"85145eea3015eb8e","name":"autotest-monster","source":"85145eea3015eb8e.webm","type":"video/webm","size":4051339},{"uid":"d442f56a76165ba4","name":"autotest-monster","source":"d442f56a76165ba4.webm","type":"video/webm","size":4051339}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"attachmentsCount":2,"shouldDisplayMessage":false},{"name":"_pw_artifacts_folder::0","time":{"start":1762760074264,"stop":1762760074265,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"browser::0","time":{"start":1762760074266,"stop":1762760074391,"duration":125},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"playwright::0","time":{"start":1762760074393,"stop":1762760074402,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"parentSuite","value":"test_case.UI.Test_Katana"},{"name":"suite","value":"test_ui"},{"name":"host","value":"DESKTOP-TAHPJA0"},{"name":"thread","value":"4492-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_case.UI.Test_Katana.test_ui"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"smokecases1","value":"{'testT4264': {'description': 'Verify that the user adds the link card of Image on the shop page(modules) and module menu', 'test_step': {'open': 'https://release.pear.us/demi-release', 'sleep1': 5000, 'R_click1': {'role': 'button', 'name': 'Customize'}, 'R_click2': {'role': 'tab', 'name': 'Modules'}, 'R_click3': {'role': 'button', 'name': 'Add new module'}, 'check1': {'role': 'radio', 'name': 'Links (select a type below)'}, 'l_click_regex1': {'text': '^Image$', 'index': 1}, 'check2': {'role': 'radio', 'name': 'Carousel Carousel'}, 'sleep2': 5000, 'R_click4': {'role': 'button', 'name': 'Add'}, 'R_click5': {'role': 'button', 'name': 'Add new link'}, 'fill_by_placeholder_and_locator1': {'placeholder': 'https://example.com', 'locator': 'input[name=\"url\"]', 'value': 'www.baidu.com'}, 'fill2': {'placeholder': 'As the bold title on your', 'value': 'test aotu image'}, 'upload1': {'text': 'Upload', 'file_path': 'C:\\\\Users\\\\tester\\\\gemini-autotest\\\\data\\\\test image.jpg'}, 'wait_for_upload_and_ui_update1': {'timeout': 2000}, 'click_xpath1': {'xpath': 'xpath=/html/body/div[2]/div[3]/div[3]/div/div'}, 'R_click6': {'role': 'button', 'name': 'Publish'}}, 'expect_result': {'description': 'Verify that the new image link card is visible on the page', 'assertions': [{'assertion_type': 'element_visible_by_text', 'text': 'test aotu image'}]}}}"}],"links":[{"name":"ONS测试用例链接","url":"https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"91fca43317a2d87b.json","parameterValues":["'chromium'","{'testT4264': {'description': 'Verify that the user adds the link card of Image on the shop page(modules) and module menu', 'test_step': {'open': 'https://release.pear.us/demi-release', 'sleep1': 5000, 'R_click1': {'role': 'button', 'name': 'Customize'}, 'R_click2': {'role': 'tab', 'name': 'Modules'}, 'R_click3': {'role': 'button', 'name': 'Add new module'}, 'check1': {'role': 'radio', 'name': 'Links (select a type below)'}, 'l_click_regex1': {'text': '^Image$', 'index': 1}, 'check2': {'role': 'radio', 'name': 'Carousel Carousel'}, 'sleep2': 5000, 'R_click4': {'role': 'button', 'name': 'Add'}, 'R_click5': {'role': 'button', 'name': 'Add new link'}, 'fill_by_placeholder_and_locator1': {'placeholder': 'https://example.com', 'locator': 'input[name=\"url\"]', 'value': 'www.baidu.com'}, 'fill2': {'placeholder': 'As the bold title on your', 'value': 'test aotu image'}, 'upload1': {'text': 'Upload', 'file_path': 'C:\\\\Users\\\\tester\\\\gemini-autotest\\\\data\\\\test image.jpg'}, 'wait_for_upload_and_ui_update1': {'timeout': 2000}, 'click_xpath1': {'xpath': 'xpath=/html/body/div[2]/div[3]/div[3]/div/div'}, 'R_click6': {'role': 'button', 'name': 'Publish'}}, 'expect_result': {'description': 'Verify that the new image link card is visible on the page', 'assertions': [{'assertion_type': 'element_visible_by_text', 'text': 'test aotu image'}]}}}"]}