{"uid":"989a283bdd67be53","name":"testT1993","fullName":"test_case.UI.Test_Katana.test_ui#test_case","historyId":"0381e3b7529e4382bf5d576bab718e8d","time":{"start":1762482298990,"stop":1762482308007,"duration":9017},"status":"broken","statusMessage":"TypeError: allure_step() missing 1 required positional argument: 'var'","statusTrace":"smokecases1 = {'testT1993': {'description': 'Verify the function of generating invitation link', 'expect_result': {'assertions': [{'...ole': 'link'}, 'R_click3': {'name': 'Copy', 'role': 'button'}, 'R_click4': {'name': 'Manage', 'role': 'button'}, ...}}}\npage = <Page url='https://release.pear.us/demi-release'>\n\n    @allure.testcase('https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp',\n                     'ONS测试用例链接')\n    @allure.title(\"测试执行\")\n    def test_case(smokecases1, page: Page):\n        page.set_default_timeout(90000)\n        caseno = list(smokecases1.keys())[0]\n        description = dict(list(smokecases1.values())[0])[\"description\"]\n        test_step = list(smokecases1.values())[0][\"test_step\"]\n        expect_result = dict(list(smokecases1.values())[0])[\"expect_result\"]\n        allure_title(caseno)\n        allure_step_no(f'description:{description}')\n        allure_step_no(f'test_step:{str(test_step)}')\n    \n        # --- BEGIN INJECTED LOGIN CODE ---\n        # allure_step_no('Executing inline login to solve authentication issue.')\n        # page.goto(\"https://release.pear.us/login\", timeout=90000)\n        # page.get_by_text(\"Login with password\").click()\n        # page.get_by_role(\"textbox\", name=\"Phone number\").fill(\"4086257869\")\n        # page.get_by_role(\"textbox\", name=\"Input your password\").fill(\"Xuan123456\")\n        # page.get_by_role(\"button\", name=\"Log in\").click()\n        # # Wait for navigation to complete by waiting for a URL that is not the login page.\n        # page.wait_for_url(lambda url: \"/login\" not in url, timeout=60000)\n        # allure_step_no('Inline login finished, proceeding with test steps.')\n        # --- END INJECTED LOGIN CODE ---\n    \n        for k, v in test_step.items():\n            if k == \"open\":\n                if caseno == \"testT4264\":\n                    max_retries = 3\n                    for attempt in range(max_retries):\n                        try:\n                            page.wait_for_timeout(1000) # Short sleep before navigation\n                            page.goto(url=v)\n                            page.get_by_role(\"button\", name=\"Customize\").wait_for(state='visible', timeout=90000)\n                            break # If successful, break out of the retry loop\n                        except Exception as e:\n                            logger.warning(f\"Attempt {attempt + 1} failed for testT4264 navigation: {e}\")\n                            if attempt == max_retries - 1:\n                                raise # Re-raise the exception if all retries fail\n                else:\n                    page_open(page, url=v)\n                if caseno == \"testT3370\":\n                    page.screenshot(path=\"demi_release_page.png\")\n            elif caseno == \"testT1993\":\n>               allure_step(f'Click the \"Storefront\" button')\nE               TypeError: allure_step() missing 1 required positional argument: 'var'\n\ntest_case\\UI\\Test_Katana\\test_ui.py:77: TypeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1762482295886,"stop":1762482295963,"duration":77},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"pytestconfig","time":{"start":1762482295963,"stop":1762482295963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"delete_output_dir","time":{"start":1762482295963,"stop":1762482295964,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"_verify_url","time":{"start":1762482295963,"stop":1762482295963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"base_url","time":{"start":1762482295963,"stop":1762482295963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"browser_type_launch_args","time":{"start":1762482295964,"stop":1762482295964,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"playwright","time":{"start":1762482295965,"stop":1762482296480,"duration":515},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"browser","time":{"start":1762482296481,"stop":1762482298299,"duration":1818},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"connect_options","time":{"start":1762482296481,"stop":1762482296481,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"launch_browser","time":{"start":1762482296481,"stop":1762482296481,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"browser_type","time":{"start":1762482296481,"stop":1762482296481,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder","time":{"start":1762482298299,"stop":1762482298300,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"device","time":{"start":1762482298299,"stop":1762482298299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1762482298300,"stop":1762482298300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1762482298300,"stop":1762482298301,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"context","time":{"start":1762482298301,"stop":1762482298890,"duration":589},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"page","time":{"start":1762482298890,"stop":1762482298988,"duration":98},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"smokecases1","time":{"start":1762482298989,"stop":1762482298989,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"testStage":{"status":"broken","statusMessage":"TypeError: allure_step() missing 1 required positional argument: 'var'","statusTrace":"smokecases1 = {'testT1993': {'description': 'Verify the function of generating invitation link', 'expect_result': {'assertions': [{'...ole': 'link'}, 'R_click3': {'name': 'Copy', 'role': 'button'}, 'R_click4': {'name': 'Manage', 'role': 'button'}, ...}}}\npage = <Page url='https://release.pear.us/demi-release'>\n\n    @allure.testcase('https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp',\n                     'ONS测试用例链接')\n    @allure.title(\"测试执行\")\n    def test_case(smokecases1, page: Page):\n        page.set_default_timeout(90000)\n        caseno = list(smokecases1.keys())[0]\n        description = dict(list(smokecases1.values())[0])[\"description\"]\n        test_step = list(smokecases1.values())[0][\"test_step\"]\n        expect_result = dict(list(smokecases1.values())[0])[\"expect_result\"]\n        allure_title(caseno)\n        allure_step_no(f'description:{description}')\n        allure_step_no(f'test_step:{str(test_step)}')\n    \n        # --- BEGIN INJECTED LOGIN CODE ---\n        # allure_step_no('Executing inline login to solve authentication issue.')\n        # page.goto(\"https://release.pear.us/login\", timeout=90000)\n        # page.get_by_text(\"Login with password\").click()\n        # page.get_by_role(\"textbox\", name=\"Phone number\").fill(\"4086257869\")\n        # page.get_by_role(\"textbox\", name=\"Input your password\").fill(\"Xuan123456\")\n        # page.get_by_role(\"button\", name=\"Log in\").click()\n        # # Wait for navigation to complete by waiting for a URL that is not the login page.\n        # page.wait_for_url(lambda url: \"/login\" not in url, timeout=60000)\n        # allure_step_no('Inline login finished, proceeding with test steps.')\n        # --- END INJECTED LOGIN CODE ---\n    \n        for k, v in test_step.items():\n            if k == \"open\":\n                if caseno == \"testT4264\":\n                    max_retries = 3\n                    for attempt in range(max_retries):\n                        try:\n                            page.wait_for_timeout(1000) # Short sleep before navigation\n                            page.goto(url=v)\n                            page.get_by_role(\"button\", name=\"Customize\").wait_for(state='visible', timeout=90000)\n                            break # If successful, break out of the retry loop\n                        except Exception as e:\n                            logger.warning(f\"Attempt {attempt + 1} failed for testT4264 navigation: {e}\")\n                            if attempt == max_retries - 1:\n                                raise # Re-raise the exception if all retries fail\n                else:\n                    page_open(page, url=v)\n                if caseno == \"testT3370\":\n                    page.screenshot(path=\"demi_release_page.png\")\n            elif caseno == \"testT1993\":\n>               allure_step(f'Click the \"Storefront\" button')\nE               TypeError: allure_step() missing 1 required positional argument: 'var'\n\ntest_case\\UI\\Test_Katana\\test_ui.py:77: TypeError","steps":[{"name":"description:Verify the function of generating invitation link","time":{"start":1762482298991,"stop":1762482298991,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"test_step:{'open': 'https://release.pear.us/demi-release', 'R_click1': {'role': 'button', 'name': 'Storefront'}, 'R_click2': {'role': 'link', 'name': 'Collabs'}, 'R_click3': {'role': 'button', 'name': 'Copy'}, 'R_click4': {'role': 'button', 'name': 'Manage'}, 'R_click5': {'role': 'button', 'name': 'CopyOutlineIcon', 'index': 1}}","time":{"start":1762482298991,"stop":1762482298991,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"打开-https://release.pear.us/demi-release","time":{"start":1762482298991,"stop":1762482298991,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":true,"attachmentStep":false,"stepsCount":3,"hasContent":true},"afterStages":[{"name":"page::0","time":{"start":1762482308102,"stop":1762482308102,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"context::0","time":{"start":1762482308103,"stop":1762482309208,"duration":1105},"status":"passed","steps":[],"attachments":[{"uid":"c81fbc8ad8eba0d6","name":"autotest-monster","source":"c81fbc8ad8eba0d6.webm","type":"video/webm","size":195387},{"uid":"3964c61fd65f7e3a","name":"autotest-monster","source":"3964c61fd65f7e3a.webm","type":"video/webm","size":195387}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"_pw_artifacts_folder::0","time":{"start":1762482309210,"stop":1762482309210,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"browser::0","time":{"start":1762482309211,"stop":1762482309360,"duration":149},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"playwright::0","time":{"start":1762482309362,"stop":1762482309372,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"labels":[{"name":"parentSuite","value":"test_case.UI.Test_Katana"},{"name":"suite","value":"test_ui"},{"name":"host","value":"DESKTOP-TAHPJA0"},{"name":"thread","value":"33040-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_case.UI.Test_Katana.test_ui"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"smokecases1","value":"{'testT1993': {'description': 'Verify the function of generating invitation link', 'test_step': {'open': 'https://release.pear.us/demi-release', 'R_click1': {'role': 'button', 'name': 'Storefront'}, 'R_click2': {'role': 'link', 'name': 'Collabs'}, 'R_click3': {'role': 'button', 'name': 'Copy'}, 'R_click4': {'role': 'button', 'name': 'Manage'}, 'R_click5': {'role': 'button', 'name': 'CopyOutlineIcon', 'index': 1}}, 'expect_result': {'description': 'An invite link should be generated with the option to copy or share', 'assertions': [{'assertion_type': 'element_visible_by_text', 'text': 'Invite link copied'}]}}}"}],"links":[{"name":"ONS测试用例链接","url":"https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"989a283bdd67be53.json","parameterValues":["'chromium'","{'testT1993': {'description': 'Verify the function of generating invitation link', 'test_step': {'open': 'https://release.pear.us/demi-release', 'R_click1': {'role': 'button', 'name': 'Storefront'}, 'R_click2': {'role': 'link', 'name': 'Collabs'}, 'R_click3': {'role': 'button', 'name': 'Copy'}, 'R_click4': {'role': 'button', 'name': 'Manage'}, 'R_click5': {'role': 'button', 'name': 'CopyOutlineIcon', 'index': 1}}, 'expect_result': {'description': 'An invite link should be generated with the option to copy or share', 'assertions': [{'assertion_type': 'element_visible_by_text', 'text': 'Invite link copied'}]}}}"]}