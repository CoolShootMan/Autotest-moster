{"uid":"2c8f44f564123c92","name":"testB","fullName":"test_case.UI.Test_Katana.test_ui#test_case","historyId":"7c00604bec3bdb01cacd4e0a345aaa0e","time":{"start":1706251772367,"stop":1706251807811,"duration":35444},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Added to your shopView'\nActual value:  \nCall log:\nLocatorAssertions.to_have_text with timeout 5000ms\n  - waiting for get_by_role(\"alert\").first\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"","statusTrace":"smokecases1 = {'testB': {'descrption': '验证Products定位以及PDP转售(T839/T843)', 'expect_result': {'attribute': {'name': 'role', 'value': 'a...me': 'Add to shop', 'role': 'button'}, 'l_click1': {'text': 'Back'}, 'open': 'https://staging.pear.us/products', ...}}}\npage = <Page url='https://staging.pear.us/products'>\n\n    @allure.testcase('https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp',\n                     'ONS测试用例链接')\n    @allure.title(\"测试执行\")\n    def test_case(smokecases1, page: Page):\n        caseno = list(smokecases1.keys())[0]\n        descrption = dict(list(smokecases1.values())[0])[\"descrption\"]\n        test_step = list(smokecases1.values())[0][\"test_step\"]\n        expect_result = dict(list(smokecases1.values())[0])[\"expect_result\"]\n        allure_title(caseno)\n        allure_step_no(f'descrption:{descrption}')\n        allure_step_no(f'test_step:{str(test_step)}')\n        for k, v in test_step.items():\n            if k == \"open\":\n                page_open(page, url=v)\n            elif k.startswith(\"R_click\"):\n                # page_element_selector_click(page=page, selector=v)\n                page_element_role_click(page=page, role=v[\"role\"], name=v[\"name\"], index=v[\"index\"])\n            elif k.startswith(\"fill\"):\n                page_element_input_role_fill(page=page, role=v[\"role\"], value=v[\"value\"])\n            elif k.startswith(\"swipe\"):\n                if isinstance(v, list):\n                    page_swipe(page, v[0], v[1])\n                else:\n                    page_swipe(v[\"x\"], v[\"y\"])\n            elif k.startswith(\"sleep\"):\n                page.wait_for_timeout(v)\n            elif k.startswith(\"press\"):\n                page_element_input_role_press(page=page, role=v[\"role\"], key=v[\"key\"])\n            elif k.startswith(\"l_click\"):\n                page_element_label_click(page=page, text=v[\"text\"])\n            page.wait_for_timeout(1000)\n        allure_step_no(f'expect_result:{str(expect_result)}')\n        element = page.get_by_role(role=expect_result[\"role\"]).nth(0)\n>       expect(element).to_have_text(expect_result[\"value\"])\nE       AssertionError: Locator expected to have text 'Added to your shopView'\nE       Actual value:  \nE       Call log:\nE       LocatorAssertions.to_have_text with timeout 5000ms\nE         - waiting for get_by_role(\"alert\").first\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\n\ntest_case\\UI\\Test_Katana\\test_ui.py:72: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1706251771643,"stop":1706251771702,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"base_url","time":{"start":1706251771703,"stop":1706251771703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"_verify_url","time":{"start":1706251771703,"stop":1706251771703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1706251771703,"stop":1706251771703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1706251771703,"stop":1706251771703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1706251771703,"stop":1706251771703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"playwright","time":{"start":1706251771703,"stop":1706251771963,"duration":260},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"browser_type","time":{"start":1706251771963,"stop":1706251771963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"browser","time":{"start":1706251771963,"stop":1706251772187,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"launch_browser","time":{"start":1706251771963,"stop":1706251771963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"device","time":{"start":1706251772187,"stop":1706251772188,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1706251772188,"stop":1706251772189,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1706251772188,"stop":1706251772188,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"context","time":{"start":1706251772189,"stop":1706251772304,"duration":115},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"page","time":{"start":1706251772304,"stop":1706251772366,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"smokecases1","time":{"start":1706251772366,"stop":1706251772366,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Added to your shopView'\nActual value:  \nCall log:\nLocatorAssertions.to_have_text with timeout 5000ms\n  - waiting for get_by_role(\"alert\").first\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"\n  -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\n  -   unexpected value \"\"","statusTrace":"smokecases1 = {'testB': {'descrption': '验证Products定位以及PDP转售(T839/T843)', 'expect_result': {'attribute': {'name': 'role', 'value': 'a...me': 'Add to shop', 'role': 'button'}, 'l_click1': {'text': 'Back'}, 'open': 'https://staging.pear.us/products', ...}}}\npage = <Page url='https://staging.pear.us/products'>\n\n    @allure.testcase('https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp',\n                     'ONS测试用例链接')\n    @allure.title(\"测试执行\")\n    def test_case(smokecases1, page: Page):\n        caseno = list(smokecases1.keys())[0]\n        descrption = dict(list(smokecases1.values())[0])[\"descrption\"]\n        test_step = list(smokecases1.values())[0][\"test_step\"]\n        expect_result = dict(list(smokecases1.values())[0])[\"expect_result\"]\n        allure_title(caseno)\n        allure_step_no(f'descrption:{descrption}')\n        allure_step_no(f'test_step:{str(test_step)}')\n        for k, v in test_step.items():\n            if k == \"open\":\n                page_open(page, url=v)\n            elif k.startswith(\"R_click\"):\n                # page_element_selector_click(page=page, selector=v)\n                page_element_role_click(page=page, role=v[\"role\"], name=v[\"name\"], index=v[\"index\"])\n            elif k.startswith(\"fill\"):\n                page_element_input_role_fill(page=page, role=v[\"role\"], value=v[\"value\"])\n            elif k.startswith(\"swipe\"):\n                if isinstance(v, list):\n                    page_swipe(page, v[0], v[1])\n                else:\n                    page_swipe(v[\"x\"], v[\"y\"])\n            elif k.startswith(\"sleep\"):\n                page.wait_for_timeout(v)\n            elif k.startswith(\"press\"):\n                page_element_input_role_press(page=page, role=v[\"role\"], key=v[\"key\"])\n            elif k.startswith(\"l_click\"):\n                page_element_label_click(page=page, text=v[\"text\"])\n            page.wait_for_timeout(1000)\n        allure_step_no(f'expect_result:{str(expect_result)}')\n        element = page.get_by_role(role=expect_result[\"role\"]).nth(0)\n>       expect(element).to_have_text(expect_result[\"value\"])\nE       AssertionError: Locator expected to have text 'Added to your shopView'\nE       Actual value:  \nE       Call log:\nE       LocatorAssertions.to_have_text with timeout 5000ms\nE         - waiting for get_by_role(\"alert\").first\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\nE         -   locator resolved to <div role=\"alert\" aria-live=\"assertive\" id=\"__next-ro…></div>\nE         -   unexpected value \"\"\n\ntest_case\\UI\\Test_Katana\\test_ui.py:72: AssertionError","steps":[{"name":"descrption:验证Products定位以及PDP转售(T839/T843)","time":{"start":1706251772367,"stop":1706251772367,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"test_step:{'open': 'https://staging.pear.us/products', 'swipe1': [0, 900], 'sleep1': 1500, 'R_click1': {'role': 'img', 'name': '', 'index': '13'}, 'sleep2': 1500, 'l_click1': {'text': 'Back'}, 'sleep3': 1500, 'R_lick2': {'role': 'button', 'name': 'Add to shop', 'index': '20'}, 'sleep4': 3000}","time":{"start":1706251772367,"stop":1706251772367,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"打开-https://staging.pear.us/products","time":{"start":1706251772367,"stop":1706251772368,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"滑动元素,坐标-(0, 900)","time":{"start":1706251786932,"stop":1706251786933,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"点击了元素-img,出现文本-","time":{"start":1706251790486,"stop":1706251790486,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"点击了元素-Back","time":{"start":1706251794108,"stop":1706251794108,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"expect_result:{'descrption': \"期望添加产品成功的弹窗文案是'Added to your shop'和'View'\", 'role': 'alert', 'value': 'Added to your shopView', 'visible': 'Ture', 'attribute': {'name': 'role', 'value': 'alert'}}","time":{"start":1706251802787,"stop":1706251802787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true,"stepsCount":7,"attachmentStep":false},"afterStages":[{"name":"page::0","time":{"start":1706251807818,"stop":1706251807818,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"context::0","time":{"start":1706251807819,"stop":1706251808633,"duration":814},"status":"passed","steps":[],"attachments":[{"uid":"2abcc11e64ef15c1","name":"autotest-monster-failed","source":"2abcc11e64ef15c1.webm","type":"video/webm","size":661132}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0,"attachmentStep":false},{"name":"browser::0","time":{"start":1706251808635,"stop":1706251808702,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"playwright::0","time":{"start":1706251808703,"stop":1706251808711,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"test_case.UI.Test_Katana"},{"name":"suite","value":"test_ui"},{"name":"host","value":"DESKTOP-TAHPJA0"},{"name":"thread","value":"10344-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_case.UI.Test_Katana.test_ui"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"smokecases1","value":"{'testB': {'descrption': '验证Products定位以及PDP转售(T839/T843)', 'test_step': {'open': 'https://staging.pear.us/products', 'swipe1': [0, 900], 'sleep1': 1500, 'R_click1': {'role': 'img', 'name': '', 'index': '13'}, 'sleep2': 1500, 'l_click1': {'text': 'Back'}, 'sleep3': 1500, 'R_lick2': {'role': 'button', 'name': 'Add to shop', 'index': '20'}, 'sleep4': 3000}, 'expect_result': {'descrption': \"期望添加产品成功的弹窗文案是'Added to your shop'和'View'\", 'role': 'alert', 'value': 'Added to your shopView', 'visible': 'Ture', 'attribute': {'name': 'role', 'value': 'alert'}}}}"}],"links":[{"name":"ONS测试用例链接","url":"https://ones.cn/project/#/testcase/team/T7u1zXum/plan/QCuFwDdq/library/XcAFFViB/module/6mi4qiVp","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"2c8f44f564123c92.json","parameterValues":["'chromium'","{'testB': {'descrption': '验证Products定位以及PDP转售(T839/T843)', 'test_step': {'open': 'https://staging.pear.us/products', 'swipe1': [0, 900], 'sleep1': 1500, 'R_click1': {'role': 'img', 'name': '', 'index': '13'}, 'sleep2': 1500, 'l_click1': {'text': 'Back'}, 'sleep3': 1500, 'R_lick2': {'role': 'button', 'name': 'Add to shop', 'index': '20'}, 'sleep4': 3000}, 'expect_result': {'descrption': \"期望添加产品成功的弹窗文案是'Added to your shop'和'View'\", 'role': 'alert', 'value': 'Added to your shopView', 'visible': 'Ture', 'attribute': {'name': 'role', 'value': 'alert'}}}}"]}